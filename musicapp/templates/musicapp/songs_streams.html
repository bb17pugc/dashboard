{% extends 'musicapp/layout.html' %}
{% load static %}
{% block content %}

<br>
<div class="col-lg-12 col-sm-12 col-md-12 card"  >
               

                <table class="table" style="table-layout: auto;width: 100%;" >
                    <thead class="alert " style="background-color: coral;color: white;" >
                        <tr>
                            <th>
                                #
                            </th>
                            <th>
                                Picture
                            </th>
                            
                            <th>
                                First Name
                            </th>
                            <th>
                                Last Name
                            </th>
                            <th>
                                Username
                            </th>
                            <th>
                                Gender
                            </th>
                            <th  >
                                    Streams
                            </th>
                            <th>

                            </th>
                            
                          
                        </tr>
                    </thead>
                    <tbody id="myTable" >
                        {% for i in users %}
                        <tr>
                            <td>
                                {{forloop.counter}}
                            </td>
                            <td>
                                <img style="border-radius: 150px;" src="{{i.image}}" alt="" width="20%" height="auto" >  
                            </td>
                            <td>
                                {{i.First_Name}}
                            </td>
                            <td>
                                {{i.Last_Name}}
                            </td>
                            <td>
                                {{i.Username}}
                            </td>
                            <td>
                                {{i.Gender}}
                            </td>
                            <td  >
                               
                                {{i.Streams}}
                            </td> 
                          
                            <td>
                                
                                <button style="font-size: 18px;" id="{{i.Username}}"  class="add-streams btn btn-danger" >
                                        
                                            Add Streams
                                        
                                </button>

                            </td> 
                           
                        </tr>


                        {% endfor %}
                       

                        
                    </tbody>
                </table>
        
       
</div>
<div class="card text-center py-4 collapse" >
      <ul class="pagingation" >
        <li>
            <button class="btn btn-lg btn-default border" >
                  <i class="fa fa-angle-left" style="font-size: 23px;" >

                  </i>
            </button>
        </li>
          <li>
              <button class="btn btn-lg btn-default border" >
                    1
              </button>
          </li>
          <li>
            <button class="btn btn-lg btn-default border" >
                  2
            </button>
        </li>
        <li>
            <button class="btn btn-lg btn-default border" >
                  3
            </button>
        </li>
        <li>
            <button class="btn btn-lg btn-default border" >
                  4
            </button>
        </li>
        <li>
            <button class="btn btn-lg btn-default border" >
                  5
            </button>
        </li>
        <li>
            <button class="btn btn-lg btn-default border" >
                  6
            </button>
        </li>
        <li>
            <button class="btn btn-lg btn-default border" >
                  <i class="fa fa-angle-right" style="font-size: 23px;" >

                  </i>
            </button>
        </li>
        
      </ul>                     
</div>


<div  id="ex1" class="modal border" style="height: 500px;overflow: hidden;"  >
                          
    <div class=" col-lg-12 col-md-12 col-sm-12 text-center" >
        <div class="col-lg-12 col-sm-12 col-md-12 text-center " >
            <form method="POST" enctype="multipart/form-data" id="profile-form">
                {% csrf_token %}
                <h4 id="lbluser" >
                    USER
                </h4>
                <input type="hidden" value="" name="user" class="stream_user" >           
                <input type="number" min="0" required placeholder="enter streams" name="streams" class="form-control" >
            <br>
            <button class="btn btn-primary btn-block" type="submit" > ADD </button>
        </form>
        <a href="#" rel="modal:close" style="margin-top: 100px !important;" >Close</a>

        </div>
     
        <br>
      
    </div>
   
</div>


<style>
    .pagingation
    {
        list-style-type: none;
        padding: 0px;
        margin: 0px;
        display:flex;
         justify-content: center;
    }
    .pagingation li
    {
        margin-left: 10px;
        float: left;
    }
    
</style>

<script>
    var id=0;
    $(document).ready(function(){
    $('.add-streams').on('click' , function()
    {
        $("#ex1").modal({
        escapeClose: false,
        clickClose: false,
        showClose: false
        });
        id=$(this).attr('id');
        $('#lbluser').text($(this).attr('id'));
        $('.stream_user').val($(this).attr('id'));



    });

        
    $("#profile-form").submit(function(e){
        //$('.profile-loader').removeClass('collapse');
        $form = $(this);
        var formData = new FormData(this);
        e.preventDefault();
        
    $.ajax({
        type:'POST',
        url : 'streams',
        data : formData ,
        processData: false,
        contentType: false,
        success:function(json){
            
            location.reload();
        },
        error : function(xhr,errmsg,err) {
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
    });
});
});
</script>

{% endblock content %}